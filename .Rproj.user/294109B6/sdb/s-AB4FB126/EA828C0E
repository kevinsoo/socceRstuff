{
    "collab_server" : "",
    "contents" : "# load packages\nlibrary(XML)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(stringr)\ntheme_set(theme_bw())\n\n# this code scrapes the table for standard and control stats (11 pages each)\nfor (i in 1:11) {\n    standard <- paste(\"http://www.foxsports.com/soccer/stats?competition=1&season=20150&category=STANDARD&pos=0&team=0&isOpp=0&splitType=0&sort=3&sortOrder=0&page=\", i, sep=\"\")\n    standard.table <- readHTMLTable(fox, header=T, which=1, stringsAsFactors=F)\n    control <- paste(\"http://www.foxsports.com/soccer/stats?competition=1&season=20150&category=CONTROL&pos=0&team=0&isOpp=0&splitType=0&sort=4&sortOrder=0&page=\", i, sep=\"\")\n    control.table <- readHTMLTable(fox, header=T, which=1, stringsAsFactors=F)\n    if (i==1) {\n        df.standard <- standard.table\n        df.control <- control.table\n    }\n    else {\n        df.standard <- rbind(df.standard, standard.table)\n        df.control <- rbind(df.control, fox.table)\n    }\n}\n\n#### combine and clean data\n# rename columns\ncolnames(df.standard) <- c(\"Standard\", \"GP\", \"GS\", \"MP\", \"Goals\", \"Assists\", \"ShotsOnGoal\", \"Shots\", \"YC\", \"RC\")\ncolnames(df.control) <- c(\"Control\", \"GP\", \"GS\", \"MP\", \"Touches\", \"Passes\", \"Interceptions\", \"Blocks\", \"GoalmouthBlocks\", \"Tackles\", \"Offside\", \"Crosses\", \"CornerKicks\")\n\n# remove empty columns\ndf.standard <- na.omit(df.standard)\ndf.control <- na.omit(df.control)\n\n# get clubs from string\ndf.standard$Club <- str_sub(df.standard$Standard, str_length(df.standard$Standard)-2, str_length(df.standard$Standard))\ndf.control$Club <- str_sub(df.control$Control, str_length(df.control$Control)-2, str_length(df.control$Control))\ndf.standard$Club <- ifelse(str_detect(df.standard$Club, \" \")==TRUE, NA, df.standard$Club)\ndf.control$Club <- ifelse(str_detect(df.control$Club, \" \")==TRUE, NA, df.control$Club)\n\n# get names from string\ndf.standard$Name <- str_replace_all(df.standard$Standard, \"\\n\" , \" \")\ndf.standard$Name <- str_replace_all(df.standard$Name, \"\\r\" , \"\")\ndf.standard$Name <- str_replace_all(df.standard$Name, \"\\t\" , \"\")\ndf.control$Name <- str_replace_all(df.control$Control, \"\\n\" , \" \")\ndf.control$Name <- str_replace_all(df.control$Name, \"\\r\" , \"\")\ndf.control$Name <- str_replace_all(df.control$Name, \"\\t\" , \"\")\n\nfor (i in 1:nrow(df.standard)) {\n    df.standard$Name[i] <- str_sub(df.standard$Name[i], \n                                   str_locate_all(df.standard$Name[i], \", \")[[1]][1,2] + 1, \n                                   str_locate_all(df.standard$Name[i], \", \")[[1]][2,1] - 1)\n    df.control$Name[i] <- str_sub(df.control$Name[i],\n                                   str_locate_all(df.control$Name[i], \", \")[[1]][1,2] + 1, \n                                   str_locate_all(df.control$Name[i], \", \")[[1]][2,1] - 1)\n}\n\n# collect data frames\ndf.standard <- df.standard %>% select(Name, Club, GP:RC)\n\n# save data frames\nsave(df.standard, file=\"StandardStats_PremLeague1516.Rda\")\nsave(df.control, file=\"ControlStats_PremLeague1516.Rda\")\n\n",
    "created" : 1469730320022.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4155144265",
    "id" : "EA828C0E",
    "lastKnownWriteTime" : 1469768090,
    "last_content_update" : 1469768090331,
    "path" : "~/Desktop/Programming/socceRstuff/kevin_scrapeData.R",
    "project_path" : "kevin_scrapeData.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}